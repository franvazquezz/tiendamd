// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
}

model Student {
    id        Int       @id @default(autoincrement())
    name      String
    birthday  DateTime? @db.Date
    telephone String?
    day       String?
    timetable Timetable?
    months    Month[]
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
}

model Month {
    id        Int      @id @default(autoincrement())
    label     String
    student   Student  @relation(fields: [studentId], references: [id])
    studentId Int
    classes   Class[]
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@unique([studentId, label])
}

model Class {
    id            Int       @id @default(autoincrement())
    className     String
    assistance    Boolean   @default(false)
    classDay      DateTime? @db.Date
    classPrice    Decimal
    classPaid     Boolean   @default(false)
    ovenName      String?
    ovenPrice     String
    ovenPaid      Boolean   @default(false)
    materialName  String
    materialPrice String
    materialPaid  Boolean   @default(false)
    month         Month     @relation(fields: [monthId], references: [id])
    monthId       Int
    createdAt     DateTime  @default(now())
    updatedAt     DateTime  @updatedAt
}

enum Timetable {
    TEN_THIRTY @map("10:30")
    SIXTEEN    @map("16:00")
    EIGHTEEN   @map("18:30")
}
